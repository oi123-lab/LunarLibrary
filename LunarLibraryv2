local LunarLib = {}

function LunarLib:CreateWindow(title, theme)
    local ScreenGui = Instance.new("ScreenGui")
    local Frame = Instance.new("Frame")
    local UICorner = Instance.new("UICorner")
    local Title = Instance.new("TextLabel")
    local CloseButton = Instance.new("TextButton")
    local MinimizeButton = Instance.new("TextButton")

    ScreenGui.Name = "LunarLibraryUI"
    ScreenGui.Parent = game.CoreGui
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    Frame.Parent = ScreenGui
    Frame.BackgroundColor3 = Color3.fromRGB(194, 178, 128) -- Cor da areia
    Frame.Position = UDim2.new(0.3, 0, 0.3, 0)
    Frame.Size = UDim2.new(0, 300, 0, 200)
    Frame.Active = true
    Frame.Draggable = true

    UICorner.CornerRadius = UDim.new(0, 12)
    UICorner.Parent = Frame

    Title.Parent = Frame
    Title.BackgroundTransparency = 1
    Title.Size = UDim2.new(1, -60, 0, 50)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.Font = Enum.Font.SourceSansBold
    Title.Text = title or "Lunar Library"
    Title.TextColor3 = Color3.new(0, 0, 0)
    Title.TextScaled = true

    -- Botão Fechar
    CloseButton.Parent = Frame
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -35, 0, 5)
    CloseButton.Text = "X"
    CloseButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
    CloseButton.TextColor3 = Color3.new(0, 0, 0)
    CloseButton.Font = Enum.Font.SourceSansBold
    CloseButton.TextScaled = true

    -- Botão Minimizar
    MinimizeButton.Parent = Frame
    MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
    MinimizeButton.Position = UDim2.new(1, -70, 0, 5)
    MinimizeButton.Text = "_"
    MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 255, 150)
    MinimizeButton.TextColor3 = Color3.new(0, 0, 0)
    MinimizeButton.Font = Enum.Font.SourceSansBold
    MinimizeButton.TextScaled = true

    local minimized = false
    local originalSize = Frame.Size

    MinimizeButton.MouseButton1Click:Connect(function()
        minimized = not minimized
        if minimized then
            Frame.Size = UDim2.new(0, 300, 0, 50)
        else
            Frame.Size = originalSize
        end
    end)

    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    local window = {}
    window.Frame = Frame

    function window:CreateTab(tabname)
        local Button = Instance.new("TextButton")
        Button.Parent = Frame
        Button.BackgroundColor3 = Color3.fromRGB(210, 180, 140)
        Button.Size = UDim2.new(0, 280, 0, 40)
        Button.Position = UDim2.new(0, 10, 0, 60)
        Button.Text = tabname or "Nova Aba"
        Button.TextColor3 = Color3.new(0, 0, 0)
        Button.Font = Enum.Font.SourceSans
        Button.TextScaled = true

        local tab = {}
        tab.Button = Button

        function tab:AddButton(buttonName, callback)
            local NewButton = Instance.new("TextButton")
            NewButton.Parent = Frame
            NewButton.BackgroundColor3 = Color3.fromRGB(222, 184, 135)
            NewButton.Size = UDim2.new(0, 280, 0, 40)
            NewButton.Position = UDim2.new(0, 10, 0, 110)
            NewButton.Text = buttonName or "Novo Botão"
            NewButton.TextColor3 = Color3.new(0, 0, 0)
            NewButton.Font = Enum.Font.SourceSans
            NewButton.TextScaled = true

            NewButton.MouseButton1Click:Connect(function()
                pcall(callback)
            end)
        end

        return tab
    end

    return window
end

return LunarLib
