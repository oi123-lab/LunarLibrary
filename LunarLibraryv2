local LunarLib = {}

function LunarLib:CreateWindow(config)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "LunarLibrary"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = game:GetService("CoreGui")

    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 500, 0, 300)
    MainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
    MainFrame.BackgroundTransparency = 0.3
    MainFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
    MainFrame.BorderSizePixel = 0
    MainFrame.Draggable = true
    MainFrame.Active = true
    MainFrame.Parent = ScreenGui

    local Title = Instance.new("TextLabel")
    Title.Text = config.Name or "Nome da Hub"
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.BackgroundTransparency = 1
    Title.TextColor3 = Color3.fromRGB(255,255,255)
    Title.Font = Enum.Font.SourceSansBold
    Title.TextSize = 24
    Title.Parent = MainFrame

    local Subtitle = Instance.new("TextLabel")
    Subtitle.Text = config.Subtitle or "Subt√≠tulo Aqui"
    Subtitle.Size = UDim2.new(1, 0, 0, 20)
    Subtitle.Position = UDim2.new(0, 0, 0, 30)
    Subtitle.BackgroundTransparency = 1
    Subtitle.TextColor3 = Color3.fromRGB(255,255,255)
    Subtitle.Font = Enum.Font.SourceSans
    Subtitle.TextSize = 16
    Subtitle.Parent = MainFrame

    local TabsFrame = Instance.new("Frame")
    TabsFrame.Size = UDim2.new(0, 120, 1, -50)
    TabsFrame.Position = UDim2.new(0, 0, 0, 50)
    TabsFrame.BackgroundTransparency = 0.2
    TabsFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
    TabsFrame.Parent = MainFrame

    local ContentFrame = Instance.new("Frame")
    ContentFrame.Size = UDim2.new(1, -130, 1, -50)
    ContentFrame.Position = UDim2.new(0, 130, 0, 50)
    ContentFrame.BackgroundTransparency = 0.2
    ContentFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
    ContentFrame.Parent = MainFrame

    local function ClearContent()
        for _, child in ipairs(ContentFrame:GetChildren()) do
            child:Destroy()
        end
    end

    local Window = {}

    function Window:AddTab(tabName)
        local TabButton = Instance.new("TextButton")
        TabButton.Text = tabName
        TabButton.Size = UDim2.new(1, 0, 0, 30)
        TabButton.BackgroundTransparency = 0.1
        TabButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
        TabButton.TextColor3 = Color3.fromRGB(255,255,255)
        TabButton.Parent = TabsFrame

        local Tab = {}

        function Tab:AddSection(sectionName)
            local SectionFrame = Instance.new("Frame")
            SectionFrame.Size = UDim2.new(1, -10, 1, -10)
            SectionFrame.Position = UDim2.new(0, 5, 0, 5)
            SectionFrame.BackgroundTransparency = 0.2
            SectionFrame.BackgroundColor3 = Color3.fromRGB(50,50,50)
            SectionFrame.Parent = ContentFrame

            local SectionTitle = Instance.new("TextLabel")
            SectionTitle.Text = sectionName
            SectionTitle.Size = UDim2.new(1, 0, 0, 20)
            SectionTitle.BackgroundTransparency = 1
            SectionTitle.TextColor3 = Color3.fromRGB(255,255,255)
            SectionTitle.Font = Enum.Font.SourceSansBold
            SectionTitle.TextSize = 18
            SectionTitle.Parent = SectionFrame

            local yOffset = 25

            local Section = {}

            function Section:AddButton(text, callback)
                local Button = Instance.new("TextButton")
                Button.Text = text
                Button.Size = UDim2.new(1, -10, 0, 25)
                Button.Position = UDim2.new(0, 5, 0, yOffset)
                Button.BackgroundTransparency = 0.1
                Button.BackgroundColor3 = Color3.fromRGB(60,60,60)
                Button.TextColor3 = Color3.fromRGB(255,255,255)
                Button.Parent = SectionFrame

                Button.MouseButton1Click:Connect(callback)

                yOffset = yOffset + 30
            end

            function Section:AddToggle(text, default, callback)
                local Toggle = Instance.new("TextButton")
                Toggle.Text = text .. ": " .. tostring(default)
                Toggle.Size = UDim2.new(1, -10, 0, 25)
                Toggle.Position = UDim2.new(0, 5, 0, yOffset)
                Toggle.BackgroundTransparency = 0.1
                Toggle.BackgroundColor3 = Color3.fromRGB(60,60,60)
                Toggle.TextColor3 = Color3.fromRGB(255,255,255)
                Toggle.Parent = SectionFrame

                local state = default
                Toggle.MouseButton1Click:Connect(function()
                    state = not state
                    Toggle.Text = text .. ": " .. tostring(state)
                    callback(state)
                end)

                yOffset = yOffset + 30
            end

            function Section:AddSlider(text, min, max, default, callback)
                local Label = Instance.new("TextLabel")
                Label.Text = text .. ": " .. tostring(default)
                Label.Size = UDim2.new(1, -10, 0, 20)
                Label.Position = UDim2.new(0, 5, 0, yOffset)
                Label.BackgroundTransparency = 1
                Label.TextColor3 = Color3.fromRGB(255,255,255)
                Label.Parent = SectionFrame

                yOffset = yOffset + 20

                local Slider = Instance.new("TextButton")
                Slider.Text = "Arraste"
                Slider.Size = UDim2.new(1, -10, 0, 20)
                Slider.Position = UDim2.new(0, 5, 0, yOffset)
                Slider.BackgroundTransparency = 0.1
                Slider.BackgroundColor3 = Color3.fromRGB(60,60,60)
                Slider.TextColor3 = Color3.fromRGB(255,255,255)
                Slider.Parent = SectionFrame

                Slider.MouseButton1Click:Connect(function()
                    local value = math.random(min, max)
                    Label.Text = text .. ": " .. tostring(value)
                    callback(value)
                end)

                yOffset = yOffset + 30
            end

            function Section:AddDropdown(text, options, callback)
                local Dropdown = Instance.new("TextButton")
                Dropdown.Text = text .. ": [Selecionar]"
                Dropdown.Size = UDim2.new(1, -10, 0, 25)
                Dropdown.Position = UDim2.new(0, 5, 0, yOffset)
                Dropdown.BackgroundTransparency = 0.1
                Dropdown.BackgroundColor3 = Color3.fromRGB(60,60,60)
                Dropdown.TextColor3 = Color3.fromRGB(255,255,255)
                Dropdown.Parent = SectionFrame

                Dropdown.MouseButton1Click:Connect(function()
                    local choice = options[math.random(1, #options)]
                    Dropdown.Text = text .. ": " .. choice
                    callback(choice)
                end)

                yOffset = yOffset + 30
            end

            function Section:AddTextBox(text, callback)
                local Label = Instance.new("TextLabel")
                Label.Text = text
                Label.Size = UDim2.new(1, -10, 0, 20)
                Label.Position = UDim2.new(0, 5, 0, yOffset)
                Label.BackgroundTransparency = 1
                Label.TextColor3 = Color3.fromRGB(255,255,255)
                Label.Parent = SectionFrame

                yOffset = yOffset + 20

                local TextBox = Instance.new("TextBox")
                TextBox.Size = UDim2.new(1, -10, 0, 25)
                TextBox.Position = UDim2.new(0, 5, 0, yOffset)
                TextBox.BackgroundTransparency = 0.1
                TextBox.BackgroundColor3 = Color3.fromRGB(60,60,60)
                TextBox.TextColor3 = Color3.fromRGB(255,255,255)
                TextBox.PlaceholderText = "Digite aqui"
                TextBox.Parent = SectionFrame

                TextBox.FocusLost:Connect(function()
                    callback(TextBox.Text)
                end)

                yOffset = yOffset + 30
            end

            return Section
        end

        TabButton.MouseButton1Click:Connect(function()
            ClearContent()
            Tab:AddSection("Exemplo")
        end)

        return Tab
    end

    return Window
end

return LunarLib
